{% extends "base.html" %}

{% block title %}Raw Material{% endblock %}

{% block content %}
<div class="flex h-[calc(100vh-72px)]">

    <!-- Sidebar -->
    <div class="w-64 bg-white border-r overflow-y-auto">

        <div class="p-6 border-b border-gray-200">
            <h2 class="text-xl font-bold text-gray-900">SpindleStock</h2>
        </div>

        <div class="p-4">

    <a href="/stock/"
       class="flex items-center gap-3 px-4 py-3 rounded-lg font-medium transition-colors mb-2
       {% if request.endpoint == 'spindlestock.dashboard' %}
           bg-primary-50 text-primary-600 border-r-4 border-primary-600
       {% else %}
           text-gray-600 hover:bg-gray-50
       {% endif %}">
        <span class="text-xl">üìä</span>
        <span>Dashboard</span>
    </a>

    <a href="/stock/raw"
       class="flex items-center gap-3 px-4 py-3 rounded-lg font-medium transition-colors mb-2
       {% if request.endpoint == 'spindlestock.raw_inward' %}
           bg-primary-50 text-primary-600 border-r-4 border-primary-600
       {% else %}
           text-gray-600 hover:bg-gray-50
       {% endif %}">
        <span class="text-xl">üì¶</span>
        <span>Raw Material</span>
    </a>

    <a href="/stock/production"
       class="flex items-center gap-3 px-4 py-3 rounded-lg font-medium transition-colors mb-2
       {% if request.endpoint == 'spindlestock.production' %}
           bg-primary-50 text-primary-600 border-r-4 border-primary-600
       {% else %}
           text-gray-600 hover:bg-gray-50
       {% endif %}">
        <span class="text-xl">üè≠</span>
        <span>Production</span>
    </a>

    <a href="/stock/inventory"
       class="flex items-center gap-3 px-4 py-3 rounded-lg font-medium transition-colors
       {% if request.endpoint == 'spindlestock.inventory' %}
           bg-primary-50 text-primary-600 border-r-4 border-primary-600
       {% else %}
           text-gray-600 hover:bg-gray-50
       {% endif %}">
        <span class="text-xl">üìã</span>
        <span>Stock Balance</span>
    </a>

    </div>
    </div>

    <!-- Content -->
    <div class="flex-1 p-6 overflow-y-auto">

        <h3 class="text-2xl font-semibold mb-6">
            Raw Material Management
        </h3>

        <!-- Add Material -->
        <div class="card p-6 mb-6">

            <h5 class="font-semibold mb-4">
                Add Raw Material
            </h5>

            <form method="POST" class="space-y-4">

                <div class="grid grid-cols-5 gap-4">

                    <div>
                        <label class="text-sm font-medium">
                            Material Name
                        </label>
                        <input name="name" required
                               class="w-full border rounded-lg px-3 py-2">
                    </div>

                    <div>
                        <label class="text-sm font-medium">
                            Quantity
                        </label>

                        <div class="flex gap-2">
                            <input type="number" step="0.01"
                                   name="quantity" required
                                   class="w-full border rounded-lg px-3 py-2">

                            <select name="unit"
                                    class="border rounded-lg px-3 py-2">
                                <option value="kg">kg</option>
                                <option value="ton">ton</option>
                            </select>
                        </div>
                    </div>

                    <div>
                        <label class="text-sm font-medium">
                            Amount
                        </label>

                        <div class="flex">
                            <span class="px-3 py-2 bg-gray-100 border border-r-0 rounded-l-lg">
                                ‚Çπ
                            </span>
                            <input type="number" step="0.01"
                                   name="amount" required
                                   class="w-full border rounded-r-lg px-3 py-2">
                        </div>
                    </div>

                    <div>
                        <label class="text-sm font-medium">
                            Inward Date
                        </label>
                        <input type="date" name="inward_date" required
                               class="w-full border rounded-lg px-3 py-2">
                    </div>

                    <div>
                        <label class="text-sm font-medium">
                            Expiry Date
                        </label>
                        <input type="date" name="expiry_date"
                               class="w-full border rounded-lg px-3 py-2">
                    </div>

                </div>

                <button class="btn-primary mt-4">
                    Add Material
                </button>

            </form>

        </div>

        <!-- Material List -->
        <div class="card p-6">

            <h5 class="font-semibold mb-4">
                Raw Materials List
            </h5>

            <div class="overflow-x-auto">
                <table class="min-w-full text-sm">

                    <thead class="border-b bg-gray-50 text-gray-600">
                        <tr>
                            <th class="px-4 py-3 text-left">Name</th>
                            <th class="px-4 py-3 text-left">Quantity</th>
                            <th class="px-4 py-3 text-left">Amount</th>
                            <th class="px-4 py-3 text-left">Inward Date</th>
                            <th class="px-4 py-3 text-left">Expiry Date</th>
                        </tr>
                    </thead>

                    <tbody class="divide-y">

                        {% for m in materials %}
                        <tr class="hover:bg-gray-50">
                            <td class="px-4 py-3 font-medium">
                                {{ m.name }}
                            </td>

                            <td class="px-4 py-3">
                                {{ m.quantity }} {{ m.unit }}
                            </td>

                            <td class="px-4 py-3">
                                ‚Çπ {{ m.amount }}
                            </td>

                            <td class="px-4 py-3">
                                {{ m.inward_date.strftime("%d %b %Y") if m.inward_date else "" }}
                            </td>

                            <td class="px-4 py-3">
                                {{ m.expiry_date.strftime("%d %b %Y") if m.expiry_date else "" }}
                            </td>
                        </tr>
                        {% endfor %}

                    </tbody>

                </table>
            </div>

        </div>

    </div>
</div>
{% endblock %}